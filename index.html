<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Happy Birthday Papa Ngoei Kimlun!</title>
<style>
:root{--bg1:#ffdee9;--bg2:#b5fffc}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;padding:0;min-height:100vh;display:flex;justify-content:center;align-items:center;flex-direction:column;overflow:hidden;background:linear-gradient(135deg,var(--bg1),var(--bg2));font-family:Poppins,Arial,Helvetica}
#topTitle{position:absolute;top:10px;left:50%;transform:translateX(-50%);font-size:1.9rem;color:#fff;text-shadow:0 0 12px rgba(0,0,0,0.45);padding:6px 10px;border-radius:10px;z-index:100}
#scene{display:flex;flex-direction:column;align-items:center;position:relative;width:100%;max-width:900px;padding-top:56px;z-index:50}
.cake{width:200px;height:140px;position:relative;cursor:pointer;display:flex;align-items:flex-end;justify-content:center;animation:float 3s ease-in-out infinite}
.tier{width:170px;height:36px;border-radius:12px;position:absolute;left:50%;transform:translateX(-50%);box-shadow:inset 0 6px 10px rgba(0,0,0,0.08)}
.bottom{background:#b56576;bottom:-6px;height:56px;width:200px;border-radius:16px}
.middle{background:#ff8fa3;bottom:30px}
.top{background:#ffd1c1;bottom:60px}
.drip{position:absolute;top:0;left:50%;transform:translateX(-50%);width:160px;height:34px;border-radius:14px 14px 8px 8px;background:linear-gradient(180deg,#fff,#ffecec);box-shadow:0 6px 12px rgba(0,0,0,0.06)}
.candle{width:12px;height:50px;border-radius:6px;background:#ffe066;position:absolute;top:-62px;left:50%;transform:translateX(-50%)}
.flame{width:14px;height:20px;border-radius:50%;background:linear-gradient(180deg,#ffd24d,#ff8c00);position:absolute;top:-80px;left:50%;transform:translateX(-50%);animation:flicker .25s infinite alternate;box-shadow:0 0 14px rgba(255,180,0,0.9)}
.hidden{display:none}
.click-hint{margin-top:14px;font-size:1.05rem;color:#fff;text-shadow:0 0 8px rgba(0,0,0,0.45)}
/* confetti/balloon styles */
.confetti{position:fixed;width:10px;height:10px;border-radius:2px;z-index:90;pointer-events:none;will-change:transform,opacity}
.balloon{width:36px;height:48px;border-radius:50% 50% 45% 45%;position:fixed;bottom:-80px;z-index:80;pointer-events:none;will-change:transform,opacity}
.balloon::after{content:"";position:absolute;left:50%;top:54px;width:2px;height:40px;background:rgba(255,255,255,0.6);transform:translateX(-50%)}
/* simple animations */
@keyframes fall{0%{transform:translateY(-10vh) rotate(0deg);opacity:1}100%{transform:translateY(120vh) rotate(360deg);opacity:0}}
@keyframes fly{0%{transform:translateY(0) translateX(0);opacity:1}100%{transform:translateY(-120vh) translateX(30px);opacity:0}}
@keyframes float{0%{transform:translateY(0)}50%{transform:translateY(-10px)}100%{transform:translateY(0)}}
@keyframes flicker{0%{transform:translateX(-50%) scale(1)}100%{transform:translateX(-50%) scale(1.12)}}
/* fireworks (visual burst using radial confetti) handled by JS creating many .confetti elements */
/* responsive tweaks */
@media (max-width:420px){#topTitle{font-size:1.4rem;top:8px} .cake{width:170px;height:120px} .drip{width:140px;height:30px} .balloon{width:30px;height:40px}}
</style>
</head>
<body>
<h1 id="topTitle">Happy Birthday Papa Ngoei Kimlun! ðŸŽ‰</h1>
<div id="scene">
  <div class="cake" id="cake" role="button" aria-label="Birthday cake, klik untuk meniup lilin">
    <div class="drip"></div>
    <div class="tier bottom"></div>
    <div class="tier middle"></div>
    <div class="tier top"></div>
    <div class="candle" aria-hidden="true"></div>
    <div class="flame" id="flame" aria-hidden="true"></div>
  </div>
  <div class="click-hint">Klik kue untuk meniup lilin ðŸŽ‚</div>
</div>
<audio id="birthdaySong" src="jamrud.mp3" loop muted></audio>
<script>
// Utility to create and animate confetti pieces (no external lib required)
function createConfettiPiece(opts){
  const el = document.createElement('div');
  el.className = 'confetti';
  const size = opts.size || (6 + Math.random()*10);
  el.style.width = size + 'px';
  el.style.height = size + 'px';
  el.style.left = (opts.left || (Math.random()*100)) + 'vw';
  el.style.top = (opts.top || '-10vh');
  el.style.background = opts.color || `hsl(${Math.floor(Math.random()*360)},70%,60%)`;
  el.style.transform = `rotate(${Math.random()*360}deg)`;
  el.style.animation = `fall ${(opts.duration||2+Math.random()*2).toFixed(2)}s linear forwards`;
  document.body.appendChild(el);
  setTimeout(()=> el.remove(), (opts.removeAfter || 4000));
}

function launchConfetti(){
  const duration = 20000; // extended to 20s // ms
  const bursts = 20;
  for(let b=0;b<bursts;b++){
    setTimeout(()=>{
      const count = 18 + Math.floor(Math.random()*30);
      for(let i=0;i<count;i++){
        createConfettiPiece({left: (20 + Math.random()*60), top: '-5vh', duration:2 + Math.random()*2, removeAfter:4000});
      }
    }, b*150);
  }
}

// Balloons: create floating balloons that rise and then are removed
function releaseBalloons(){
  const total = 36;
  for(let i=0;i<total;i++){
    const b = document.createElement('div');
    b.className = 'balloon';
    b.style.left = Math.random()*90 + 'vw';
    b.style.background = `linear-gradient(180deg, ${randomColor()}, ${randomColor(0.6)})`;
    const dur = (6 + Math.random()*6).toFixed(2) + 's';
    b.style.animation = `fly ${dur} linear forwards`;
    b.style.opacity = '0.98';
    document.body.appendChild(b);
    setTimeout(()=> b.remove(), (parseFloat(dur)*1000)+500);
  }
}

function randomColor(alpha){
  const h = Math.floor(Math.random()*360);
  const s = 70;
  const l = 60;
  if(alpha) return `hsla(${h},${s}%,${l}%,${alpha})`;
  return `hsl(${h},${s}%,${l}%)`;
}

// Fireworks simulated by radial confetti bursts from random points near top
function fireworks(){
  const bursts = 12;
  for(let i=0;i<bursts;i++){
    setTimeout(()=>{
      const originX = 10 + Math.random()*80; // vw
      const pieces = 60 + Math.floor(Math.random()*80);
      for(let p=0;p<pieces;p++){
        // create piece with varying left and a stronger upward motion (achieved by smaller duration)
        createConfettiPiece({left: originX + (Math.random()*6-3), top: '-5vh', duration: 1.2 + Math.random()*0.8, removeAfter:1600});
      }
    }, i*300);
  }
}

// audio handling: start on first user interaction to avoid browser blocks
function enableAudioOnFirstInteraction(){
  const audio = document.getElementById('birthdaySong');
  const unlock = ()=>{
    audio.muted = false;
    audio.play().catch(()=>{});
    document.removeEventListener('click', unlock);
    document.removeEventListener('touchstart', unlock);
  };
  document.addEventListener('click', unlock, {once:true});
  document.addEventListener('touchstart', unlock, {once:true});
}

// Hook up cake interaction
document.addEventListener('DOMContentLoaded', ()=>{
  const cake = document.getElementById('cake');
  const flame = document.getElementById('flame');
  enableAudioOnFirstInteraction();
  cake.addEventListener('click', ()=>{
    const isHidden = flame.classList.toggle('hidden');
    if(isHidden){
      // when flame is turned off -> celebration
      const audio = document.getElementById('birthdaySong');
audio.muted = false;
audio.currentTime = 15;
audio.play();
launchConfetti();
      releaseBalloons();
      fireworks();
      // small accessibility announcement
      setTimeout(()=>{
        try{window.speechSynthesis.cancel();}catch(e){}
        const msg = new SpeechSynthesisUtterance('Selamat ulang tahun!');
        window.speechSynthesis.speak(msg);
      },300);
    }
  });
});
</script>
</body>
</html>
